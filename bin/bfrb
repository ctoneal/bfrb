#!/usr/bin/env ruby

require File.expand_path(File.join(File.dirname(__FILE__), "..", "lib", "bfrb.rb"))

def usage
	puts "Usage:"
	puts "Start interactive evaluation: bfrb"
	puts "Pass code in as first command line parameter (in quotes): bfrb \",[.,]\""
	puts "Specify a file to read: bfrb -f test.bf"
	puts "View this message: bfrb -u"
end

bfrb = BfRb::Base.new
# if the command line params specify a file, run it
# otherwise attempt to run code passed in as a param
if ARGV.length == 0
	puts "Starting interactive evaluation"
	bfrb.repl
else
	case ARGV[0]
	when "-u"
		usage
	when "-f"
		if ARGV.length > 1
			bfrb.load_file(ARGV[1])
		else
			puts "Invalid arguments"
			usage
		end
	else
		puts "Interpreting code"
		bfrb.run(ARGV[0])
	end
end
